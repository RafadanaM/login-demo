{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"D:\\\\projects\\\\React\\\\login-demo\\\\client\\\\src\\\\pages\\\\Landing.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport Axios from \"axios\";\nimport { useAuth } from \"../AuthContext\";\nimport { useHistory, Redirect } from \"react-router-dom\";\n\nfunction Landing() {\n  _s();\n\n  //registration\n  const [usernameReg, setUsernameReg] = useState(\"\");\n  const [passwordReg, setPasswordReg] = useState(\"\"); //login\n\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [messageReg, setMessageReg] = useState(\"\");\n  const {\n    login,\n    message,\n    currentUser\n  } = useAuth();\n  const history = useHistory();\n  Axios.defaults.withCredentials = true;\n\n  const usernameRegHandler = event => {\n    setUsernameReg(event.target.value);\n  };\n\n  const passwordRegHandler = event => {\n    setPasswordReg(event.target.value);\n  };\n\n  const usernameHandler = event => {\n    setUsername(event.target.value);\n  };\n\n  const passwordHandler = event => {\n    setPassword(event.target.value);\n  };\n\n  const register = () => {\n    Axios.post(\"http://localhost:5000/api/register\", {\n      username: usernameReg,\n      password: passwordReg\n    }).then(res => {\n      if (res.data.success) {\n        setUsernameReg(\"\");\n        setPasswordReg(\"\");\n        alert(res.data.message);\n      } else {\n        alert(res.data.message);\n      }\n    });\n  };\n\n  const loginHandler = async e => {\n    e.preventDefault();\n    await login(username, password);\n    window.location.reload();\n  };\n\n  const checkAuthentication = () => {// Axios.get(\"http://localhost:5000/api/userInfo\", {\n    //   headers: { \"x-access-token\": localStorage.getItem(\"token\") },\n    // }).then((response) => {\n    //   console.log(response);\n    // });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: currentUser ? /*#__PURE__*/_jsxDEV(Redirect, {\n      to: \"/home\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Landing\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          flexDirection: \"column\",\n          justifyContent: \"center\",\n          alignItems: \"center\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Registration\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Username\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: usernameReg,\n          onChange: usernameRegHandler\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          value: passwordReg,\n          onChange: passwordRegHandler\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: messageReg\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: register,\n          children: \"Register\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          flexDirection: \"column\",\n          justifyContent: \"center\",\n          alignItems: \"center\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Username\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: username,\n          onChange: usernameHandler\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          value: password,\n          onChange: passwordHandler\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: loginHandler,\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: checkAuthentication,\n        children: \"Check authenticated\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 11\n      }, this), \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Landing, \"URjgZSRdxhwUfVApiYpY4ICs67M=\", false, function () {\n  return [useAuth, useHistory];\n});\n\n_c = Landing;\nexport default Landing;\n\nvar _c;\n\n$RefreshReg$(_c, \"Landing\");","map":{"version":3,"sources":["D:/projects/React/login-demo/client/src/pages/Landing.js"],"names":["React","useEffect","useState","Axios","useAuth","useHistory","Redirect","Landing","usernameReg","setUsernameReg","passwordReg","setPasswordReg","username","setUsername","password","setPassword","messageReg","setMessageReg","login","message","currentUser","history","defaults","withCredentials","usernameRegHandler","event","target","value","passwordRegHandler","usernameHandler","passwordHandler","register","post","then","res","data","success","alert","loginHandler","e","preventDefault","window","location","reload","checkAuthentication","display","flexDirection","justifyContent","alignItems"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Axios from \"axios\";\r\nimport { useAuth } from \"../AuthContext\";\r\nimport { useHistory, Redirect } from \"react-router-dom\";\r\n\r\nfunction Landing() {\r\n  //registration\r\n  const [usernameReg, setUsernameReg] = useState(\"\");\r\n  const [passwordReg, setPasswordReg] = useState(\"\");\r\n\r\n  //login\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  const [messageReg, setMessageReg] = useState(\"\");\r\n\r\n  const { login, message, currentUser } = useAuth();\r\n  const history = useHistory();\r\n\r\n  Axios.defaults.withCredentials = true;\r\n\r\n  const usernameRegHandler = (event) => {\r\n    setUsernameReg(event.target.value);\r\n  };\r\n  const passwordRegHandler = (event) => {\r\n    setPasswordReg(event.target.value);\r\n  };\r\n\r\n  const usernameHandler = (event) => {\r\n    setUsername(event.target.value);\r\n  };\r\n  const passwordHandler = (event) => {\r\n    setPassword(event.target.value);\r\n  };\r\n\r\n  const register = () => {\r\n    Axios.post(\"http://localhost:5000/api/register\", {\r\n      username: usernameReg,\r\n      password: passwordReg,\r\n    }).then((res) => {\r\n      if (res.data.success) {\r\n        setUsernameReg(\"\");\r\n        setPasswordReg(\"\");\r\n        alert(res.data.message);\r\n      } else {\r\n        alert(res.data.message);\r\n      }\r\n    });\r\n  };\r\n\r\n  const loginHandler = async (e) => {\r\n    e.preventDefault();\r\n    await login(username, password);\r\n    window.location.reload();\r\n  };\r\n\r\n  const checkAuthentication = () => {\r\n    // Axios.get(\"http://localhost:5000/api/userInfo\", {\r\n    //   headers: { \"x-access-token\": localStorage.getItem(\"token\") },\r\n    // }).then((response) => {\r\n    //   console.log(response);\r\n    // });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {currentUser ? (\r\n        <Redirect to=\"/home\" />\r\n      ) : (\r\n        <div>\r\n          <h1>Landing</h1>\r\n          <div\r\n            style={{\r\n              display: \"flex\",\r\n              flexDirection: \"column\",\r\n              justifyContent: \"center\",\r\n              alignItems: \"center\",\r\n            }}\r\n          >\r\n            <h2>Registration</h2>\r\n            <label>Username</label>\r\n            <input\r\n              type=\"text\"\r\n              value={usernameReg}\r\n              onChange={usernameRegHandler}\r\n            />\r\n            <label>password</label>\r\n            <input\r\n              type=\"password\"\r\n              value={passwordReg}\r\n              onChange={passwordRegHandler}\r\n            />\r\n            <p>{messageReg}</p>\r\n            <button onClick={register}>Register</button>\r\n          </div>\r\n          <div\r\n            style={{\r\n              display: \"flex\",\r\n              flexDirection: \"column\",\r\n              justifyContent: \"center\",\r\n              alignItems: \"center\",\r\n            }}\r\n          >\r\n            <h2>Login</h2>\r\n            <label>Username</label>\r\n            <input type=\"text\" value={username} onChange={usernameHandler} />\r\n            <label>password</label>\r\n            <input\r\n              type=\"password\"\r\n              value={password}\r\n              onChange={passwordHandler}\r\n            />\r\n            <button onClick={loginHandler}>Login</button>\r\n          </div>\r\n          <p>{message}</p>\r\n          <button onClick={checkAuthentication}>\r\n            Check authenticated\r\n          </button>{\" \"}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Landing;\r\n"]},"metadata":{},"sourceType":"module"}