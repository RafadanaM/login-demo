[{"D:\\projects\\React\\login-demo\\client\\src\\index.js":"1","D:\\projects\\React\\login-demo\\client\\src\\App.js":"2","D:\\projects\\React\\login-demo\\client\\src\\pages\\Landing.js":"3","D:\\projects\\React\\login-demo\\client\\src\\pages\\Home.js":"4","D:\\projects\\React\\login-demo\\client\\src\\ProtectedRoute.js":"5","D:\\projects\\React\\login-demo\\client\\src\\AuthContext.js":"6","D:\\projects\\React\\login-demo\\client\\src\\axios\\config.js":"7"},{"size":453,"mtime":1611830628330,"results":"8","hashOfConfig":"9"},{"size":594,"mtime":1611893663561,"results":"10","hashOfConfig":"9"},{"size":3240,"mtime":1612014217029,"results":"11","hashOfConfig":"9"},{"size":1233,"mtime":1616321971011,"results":"12","hashOfConfig":"9"},{"size":475,"mtime":1616317856196,"results":"13","hashOfConfig":"9"},{"size":5435,"mtime":1616370076937,"results":"14","hashOfConfig":"9"},{"size":1881,"mtime":1613127338747,"results":"15","hashOfConfig":"9"},{"filePath":"16","messages":"17","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"18"},"1h6blih",{"filePath":"19","messages":"20","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"18"},{"filePath":"21","messages":"22","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"23","usedDeprecatedRules":"18"},{"filePath":"24","messages":"25","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"26","usedDeprecatedRules":"18"},{"filePath":"27","messages":"28","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"18"},{"filePath":"29","messages":"30","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"31","messages":"32","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"33","usedDeprecatedRules":"18"},"D:\\projects\\React\\login-demo\\client\\src\\index.js",[],["34","35"],"D:\\projects\\React\\login-demo\\client\\src\\App.js",[],"D:\\projects\\React\\login-demo\\client\\src\\pages\\Landing.js",["36","37","38"],"import React, { useEffect, useState } from \"react\";\r\nimport Axios from \"axios\";\r\nimport { useAuth } from \"../AuthContext\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nfunction Landing() {\r\n  //registration\r\n  const [usernameReg, setUsernameReg] = useState(\"\");\r\n  const [passwordReg, setPasswordReg] = useState(\"\");\r\n\r\n  //login\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  const [messageReg, setMessageReg] = useState(\"\");\r\n\r\n  const { login, message, currentUser } = useAuth();\r\n\r\n  Axios.defaults.withCredentials = true;\r\n\r\n  const usernameRegHandler = (event) => {\r\n    setUsernameReg(event.target.value);\r\n  };\r\n  const passwordRegHandler = (event) => {\r\n    setPasswordReg(event.target.value);\r\n  };\r\n\r\n  const usernameHandler = (event) => {\r\n    setUsername(event.target.value);\r\n  };\r\n  const passwordHandler = (event) => {\r\n    setPassword(event.target.value);\r\n  };\r\n\r\n  const register = () => {\r\n    Axios.post(\"http://localhost:5000/api/register\", {\r\n      username: usernameReg,\r\n      password: passwordReg,\r\n    }).then((res) => {\r\n      if (res.data.success) {\r\n        setUsernameReg(\"\");\r\n        setPasswordReg(\"\");\r\n        alert(res.data.message);\r\n      } else {\r\n        alert(res.data.message);\r\n      }\r\n    });\r\n  };\r\n\r\n  const loginHandler = (e) => {\r\n    e.preventDefault();\r\n    login(username, password);\r\n  };\r\n\r\n  const checkAuthentication = () => {\r\n    // Axios.get(\"http://localhost:5000/api/userInfo\", {\r\n    //   headers: { \"x-access-token\": localStorage.getItem(\"token\") },\r\n    // }).then((response) => {\r\n    //   console.log(response);\r\n    // });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {currentUser ? (\r\n        <Redirect to=\"/home\" />\r\n      ) : (\r\n        <div>\r\n          <h1>Landing</h1>\r\n          <div\r\n            style={{\r\n              display: \"flex\",\r\n              flexDirection: \"column\",\r\n              justifyContent: \"center\",\r\n              alignItems: \"center\",\r\n            }}\r\n          >\r\n            <h2>Registration</h2>\r\n            <label>Username</label>\r\n            <input\r\n              type=\"text\"\r\n              value={usernameReg}\r\n              onChange={usernameRegHandler}\r\n            />\r\n            <label>password</label>\r\n            <input\r\n              type=\"password\"\r\n              value={passwordReg}\r\n              onChange={passwordRegHandler}\r\n            />\r\n            <p>{messageReg}</p>\r\n            <button onClick={register}>Register</button>\r\n          </div>\r\n          <div\r\n            style={{\r\n              display: \"flex\",\r\n              flexDirection: \"column\",\r\n              justifyContent: \"center\",\r\n              alignItems: \"center\",\r\n            }}\r\n          >\r\n            <h2>Login</h2>\r\n            <label>Username</label>\r\n            <input type=\"text\" value={username} onChange={usernameHandler} />\r\n            <label>password</label>\r\n            <input\r\n              type=\"password\"\r\n              value={password}\r\n              onChange={passwordHandler}\r\n            />\r\n            <button onClick={loginHandler}>Login</button>\r\n          </div>\r\n          <p>{message}</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Landing;\r\n","D:\\projects\\React\\login-demo\\client\\src\\pages\\Home.js",["39"],"import React, { useEffect, useState } from \"react\";\r\nimport { useAuth } from \"../AuthContext\";\r\nimport axios from \"../axios/config\";\r\n\r\nfunction Home() {\r\n  const { logout, currentUser, refreshToken } = useAuth();\r\n\r\n  //const [status, setStatus] = useState();\r\n\r\n  const handleLogout = (e) => {\r\n    e.preventDefault();\r\n    logout();\r\n  };\r\n\r\n  const handleRefreshToken = (e) => {\r\n    e.preventDefault();\r\n    refreshToken();\r\n  };\r\n\r\n  const checkAuth = () => {\r\n    axios\r\n      .get(\"/checkAuth\")\r\n      .then((response) => {\r\n        console.log(response.data.token);\r\n      })\r\n      .catch((e) => {\r\n        console.log(e);\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    checkAuth();\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      {/* {`console  ${console.log(status)}`} */}\r\n      <h1>Home</h1>\r\n      <h2>Welcome {currentUser.username}</h2>\r\n\r\n      {/* {status.map((content) => (\r\n        <h2>{content.message}</h2>\r\n      ))} */}\r\n      {/* <h2>{status === undefined ? \"asd\" : status.message}</h2> */}\r\n\r\n      <button onClick={checkAuth}>Check Auth</button>\r\n      <button onClick={handleLogout}>Logout</button>\r\n      <button onClick={handleRefreshToken}>Refresh Token</button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Home;\r\n","D:\\projects\\React\\login-demo\\client\\src\\ProtectedRoute.js",[],"D:\\projects\\React\\login-demo\\client\\src\\AuthContext.js",["40","41"],"D:\\projects\\React\\login-demo\\client\\src\\axios\\config.js",["42"],"import axios from \"axios\";\r\nimport createAuthRefreshInterceptor from \"axios-auth-refresh\";\r\n//import { useAuth } from \"../AuthContext\";\r\n\r\n//const { token, setNewToken } = useAuth();\r\n\r\nconst instance = axios.create({\r\n  baseURL: \"http://localhost:5000/api\",\r\n  headers: {\r\n    \"content-type\": \"application/json\",\r\n  },\r\n  responseType: \"json\",\r\n  withCredentials: true,\r\n});\r\n\r\n// instance.interceptors.response.use(\r\n//   (response) => {\r\n//     return response;\r\n//   },\r\n//   async function (error) {\r\n//     const originalRequest = error.config;\r\n//     if (error.response.status === 403 && !originalRequest._retry) {\r\n//       originalRequest._retry = true;\r\n//       //const access_token = await refreshAccessToken();\r\n//       //axios.defaults.headers.common['Authorization'] = 'Bearer ' + access_token;\r\n//       return instance(originalRequest);\r\n//     }\r\n//     return Promise.reject(error);\r\n//   }\r\n// );\r\n\r\n// instance.interceptors.response.use(undefined, function (error) {\r\n//   alert(error.toString());\r\n//   return Promise.reject(error);\r\n// });\r\n\r\n// instance.interceptors.response.use(undefined, authInterceptor(apiClient));\r\n\r\n// const refreshAuthLogic = (failedRequest) =>\r\n//   instance\r\n//     .post(\"refresh_token\")\r\n//     .then((tokenRefreshResponse) => {\r\n//       localStorage.setItem(\"accessToken\", tokenRefreshResponse.data.access);\r\n//       failedRequest.response.config.headers[\"Authorization\"] =\r\n//         \"Bearer \" + tokenRefreshResponse.data.access;\r\n//       return Promise.resolve();\r\n//     })\r\n//     .catch((error) => {\r\n//       console.log(\"refresh fail\");\r\n//       localStorage.setItem(\"accessToken\", null);\r\n//       localStorage.setItem(\"refreshToken\", null);\r\n//       //pushToLogin();\r\n//       return Promise.reject(error);\r\n//     });\r\n// createAuthRefreshInterceptor(instance, refreshAuthLogic);\r\n\r\nexport default instance;\r\n",{"ruleId":"43","replacedBy":"44"},{"ruleId":"45","replacedBy":"46"},{"ruleId":"47","severity":1,"message":"48","line":1,"column":17,"nodeType":"49","messageId":"50","endLine":1,"endColumn":26},{"ruleId":"47","severity":1,"message":"51","line":15,"column":22,"nodeType":"49","messageId":"50","endLine":15,"endColumn":35},{"ruleId":"47","severity":1,"message":"52","line":55,"column":9,"nodeType":"49","messageId":"50","endLine":55,"endColumn":28},{"ruleId":"47","severity":1,"message":"53","line":1,"column":28,"nodeType":"49","messageId":"50","endLine":1,"endColumn":36},{"ruleId":"47","severity":1,"message":"54","line":10,"column":10,"nodeType":"49","messageId":"50","endLine":10,"endColumn":15},{"ruleId":"47","severity":1,"message":"55","line":14,"column":9,"nodeType":"49","messageId":"50","endLine":14,"endColumn":21},{"ruleId":"47","severity":1,"message":"56","line":2,"column":8,"nodeType":"49","messageId":"50","endLine":2,"endColumn":36},"no-native-reassign",["57"],"no-negated-in-lhs",["58"],"no-unused-vars","'useEffect' is defined but never used.","Identifier","unusedVar","'setMessageReg' is assigned a value but never used.","'checkAuthentication' is assigned a value but never used.","'useState' is defined but never used.","'token' is assigned a value but never used.","'processQueue' is assigned a value but never used.","'createAuthRefreshInterceptor' is defined but never used.","no-global-assign","no-unsafe-negation"]